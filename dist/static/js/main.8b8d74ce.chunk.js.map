{"version":3,"sources":["../webpack/universalModuleDefinition","public-path.js","shared/actions.js","components/pageLoading/index.tsx","router/Router.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["root","factory","exports","module","define","amd","this","window","__POWERED_BY_QIANKUN__","__webpack_public_path__","__INJECTED_PUBLIC_PATH_BY_QIANKUN__","emptyAction","console","warn","actions","onGlobalStateChange","setGlobalState","PageLoading","Home","lazy","routes","path","exact","component","PageRouter","fallback","map","route","App","Suspense","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","render","props","log","JSON","stringify","setActions","state","token","localStorage","setItem","container","ReactDOM","StrictMode","document","getElementById","bootstrap","a","mount","unmount","unmountComponentAtNode","querySelector"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,kBAAZC,SAA0C,kBAAXC,OACxCA,OAAOD,QAAUD,IACQ,oBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,kBAAZC,QACdA,QAAQ,4BAA8BD,IAEtCD,EAAK,4BAA8BC,IARrC,CASGK,MAAM,WACT,O,qHCVIC,OAAOC,yBAGTC,IAA0BF,OAAOG,sC,wOCHnC,SAASC,IAEPC,QAAQC,KAAK,oC,IAiCAC,EADC,I,iDA3BdA,QAAU,CACRC,oBAAqBJ,EACrBK,eAAgBL,G,8CAMlB,SAAWG,GACTR,KAAKQ,QAAUA,I,iCAMjB,WAA8B,IAAD,EAC3B,OAAO,EAAAR,KAAKQ,SAAQC,oBAAb,qB,4BAMT,WAAyB,IAAD,EACtB,OAAO,EAAAT,KAAKQ,SAAQE,eAAb,uB,qECxBIC,MAJf,WACE,OAAO,yBCEHC,EAAOC,gBAAK,kBAAM,gCAGlBC,EAAuB,CAC3B,CACEC,KAAM,IACNC,OAAO,EACPC,UAAWL,GAEb,CACEG,KAAM,QACNC,OAAO,EACPC,UAAWL,GAEb,CACEG,KAAM,SACNC,OAAO,EACPC,UAhBUJ,gBAAK,kBAAM,kCA8BVK,EAVI,kBACjB,cAAC,WAAD,CAAUC,SAAU,cAAC,EAAD,IAApB,SACE,cAAC,IAAD,UACGL,EAAOM,KAAI,SAACC,GAAD,OACV,cAAC,IAAD,CAA6BN,KAAMM,EAAMN,KAAMC,MAAOK,EAAML,MAAOC,UAAWI,EAAMJ,WAAxEI,EAAMN,KAAO,YCXlBO,MAbf,WACE,OACE,cAAC,IAAD,UAEE,cAAC,IAAMC,SAAP,CAAgBJ,SAAU,cAAC,EAAD,IAA1B,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOJ,KAAK,IAAIE,UAAWC,WCEtBM,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCMd,SAASQ,EAAOC,GACd5B,QAAQ6B,IAAI,sDACZ7B,QAAQ6B,IAAID,GACRA,GAAmC,OAA1BE,KAAKC,UAAUH,KAE1B1B,EAAQ8B,WAAWJ,GACnBA,EAAMzB,qBAAoB,SAAC8B,GACzB,IAAQC,EAAUD,EAAVC,MACJA,GACFvC,OAAOwC,aAAaC,QAAQ,QAASF,MAGtC,IAGL,IAAQG,EAAcT,EAAdS,UACRrC,QAAQ6B,IAAIQ,GAEZC,IAASX,OACP,cAAC,IAAMY,WAAP,UACE,cAAC,EAAD,MAGFC,SAASC,eAAe,aAcrB,SAAeC,IAAtB,+B,4CAAO,sBAAAC,EAAA,sDACL3C,QAAQ6B,IAAI,mCADP,4C,sBAOA,SAAee,EAAtB,kC,4CAAO,WAAqBhB,GAArB,SAAAe,EAAA,sDACL3C,QAAQ6B,IAAI,sCAAuCD,GACnDD,EAAOC,GAFF,4C,sBAQA,SAAeiB,EAAtB,kC,4CAAO,WAAuBjB,GAAvB,eAAAe,EAAA,sDACL3C,QAAQ6B,IAAI,+BACJQ,EAAcT,EAAdS,UAERC,IAASQ,uBACPT,EAAYA,EAAUU,cAAc,aAAeP,SAASO,cAAc,cALvE,4C,sBAxBFpD,OAAOC,yBACVI,QAAQ6B,IAAI,8CACZF,EAAO,KAyCTT,M","file":"static/js/main.8b8d74ce.chunk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qiankun-micro-react-main\"] = factory();\n\telse\n\t\troot[\"qiankun-micro-react-main\"] = factory();\n})(this, function() {\nreturn ","if (window.__POWERED_BY_QIANKUN__) {\n  // 动态设置 webpack publicPath，防止资源加载出错\n  // eslint-disable-next-line no-undef\n  __webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__\n}\n","function emptyAction() {\n  // 警告：提示当前使用的是空 Action\n  console.warn('Current execute action is empty!')\n}\n\nclass Actions {\n  // 默认值为空 Action\n  actions = {\n    onGlobalStateChange: emptyAction,\n    setGlobalState: emptyAction,\n  }\n\n  /**\n   * 设置 actions\n   */\n  setActions(actions) {\n    this.actions = actions\n  }\n\n  /**\n   * 映射\n   */\n  onGlobalStateChange(...args) {\n    return this.actions.onGlobalStateChange(...args)\n  }\n\n  /**\n   * 映射\n   */\n  setGlobalState(...args) {\n    return this.actions.setGlobalState(...args)\n  }\n}\n\nconst actions = new Actions()\nexport default actions\n","import React from 'react'\n\nfunction PageLoading() {\n  return <div></div>\n}\n\nexport default PageLoading\n","import React, { lazy, Suspense } from 'react'\nimport { Route, RouteProps, Switch } from 'react-router-dom'\n\nimport PageLoading from '../components/pageLoading'\n\nconst Home = lazy(() => import('../views/Home'))\nconst About = lazy(() => import('../views/About'))\n\nconst routes: RouteProps[] = [\n  {\n    path: '/',\n    exact: true,\n    component: Home,\n  },\n  {\n    path: '/home',\n    exact: true,\n    component: Home,\n  },\n  {\n    path: '/about',\n    exact: true,\n    component: About,\n  },\n]\n\nconst PageRouter = () => (\n  <Suspense fallback={<PageLoading />}>\n    <Switch>\n      {routes.map((route: RouteProps) => (\n        <Route key={route.path + ''} path={route.path} exact={route.exact} component={route.component} />\n      ))}\n    </Switch>\n  </Suspense>\n)\n\nexport default PageRouter\n","import React from 'react'\n// import { HashRouter as Router, Route, Switch } from 'react-router-dom'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\nimport PageRouter from './router/Router'\nimport PageLoading from './components/pageLoading'\n\nfunction App() {\n  return (\n    <Router>\n      {/* <PageRouter /> */}\n      <React.Suspense fallback={<PageLoading />}>\n        <Switch>\n          <Route path=\"/\" component={PageRouter} />\n        </Switch>\n      </React.Suspense>\n    </Router>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import './public-path'\nimport actions from './shared/actions'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\n// --------- 微前端应用处理 -----------\n\n/**\n * 渲染函数\n * 两种情况：主应用生命周期钩子中运行 / 微应用单独启动时运行\n */\nfunction render(props: any) {\n  console.log('------ React 子应用渲染 ------')\n  console.log(props)\n  if (props && JSON.stringify(props) !== '{}') {\n    // 注入 actions 实例\n    actions.setActions(props)\n    props.onGlobalStateChange((state: any) => {\n      const { token } = state\n      if (token) {\n        window.localStorage.setItem('token', token)\n        // store.commit('globalStore/setStoreTokenMutation', token)\n      }\n    }, true)\n  }\n\n  const { container } = props\n  console.log(container)\n  // 挂载应用\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    // container ? container.querySelector('#root') : document.querySelector('#root')\n    document.getElementById('sub-root')\n  )\n}\n\n// 独立运行时，直接挂载应用\nif (!window.__POWERED_BY_QIANKUN__) {\n  console.log('子应用单独运行')\n  render({})\n}\n\n/**\n * bootstrap 只会在微应用初始化的时候调用一次，下次微应用重新进入时会直接调用 mount 钩子，不会再重复触发 bootstrap。\n * 通常我们可以在这里做一些全局变量的初始化，比如不会在 unmount 阶段被销毁的应用级别的缓存等。\n */\nexport async function bootstrap() {\n  console.log('[react17] react app bootstraped')\n}\n\n/**\n * 应用每次进入都会调用 mount 方法，通常我们在这里触发应用的渲染方法\n */\nexport async function mount(props: any) {\n  console.log('[react17] props from main framework', props)\n  render(props)\n}\n\n/**\n * 应用每次 切出/卸载 会调用的方法，通常在这里我们会卸载微应用的应用实例\n */\nexport async function unmount(props: any) {\n  console.log('[react17] react app unmount')\n  const { container } = props\n  // ReactDOM.unmountComponentAtNode(container ? container.querySelector('#root') : document.querySelector('#root'))\n  ReactDOM.unmountComponentAtNode(\n    container ? container.querySelector('#sub-root') : document.querySelector('#sub-root')\n  )\n}\n\n// ReactDOM.render(\n//   <React.StrictMode>\n//     <App />\n//   </React.StrictMode>,\n//   document.getElementById('root')\n// )\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}